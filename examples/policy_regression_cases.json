[
  {
    "name": "EMR spin-up strict gate",
    "input": {
      "intent": "emr_failure",
      "confidence": 0.82,
      "evidence": {"emr_logs": {"status": "FAILED"}},
      "workflow_profile": {
        "workflow_id": "emr_spinup_failed",
        "service": "emr",
        "risk_tier": "high",
        "auto_retry_allowed": true
      },
      "evaluation": {
        "evidence_coverage": 1.0,
        "action_coverage": 1.0,
        "hard_stop": false,
        "recommended_decision": "escalate",
        "issues": []
      }
    },
    "expected_decision": "human_review",
    "expected_reason_contains": "EMR spin-up policy"
  },
  {
    "name": "Glue access denied forced escalate",
    "input": {
      "intent": "glue_etl_failure",
      "confidence": 0.91,
      "evidence": {"glue_logs": {"message": "Access denied for glue:GetTable"}},
      "workflow_profile": {
        "workflow_id": "glue_access_denied",
        "service": "glue",
        "risk_tier": "high",
        "auto_retry_allowed": false
      },
      "evaluation": {
        "evidence_coverage": 1.0,
        "action_coverage": 1.0,
        "hard_stop": false,
        "recommended_decision": "escalate",
        "issues": []
      }
    },
    "expected_decision": "escalate",
    "expected_reason_contains": "Glue policy"
  },
  {
    "name": "MWAA low confidence blocked",
    "input": {
      "intent": "mwaa_failure",
      "confidence": 0.62,
      "evidence": {"airflow_logs": {"status": "FAILED"}},
      "workflow_profile": {
        "workflow_id": "airflow_dag_failure",
        "service": "mwaa_airflow",
        "risk_tier": "medium",
        "auto_retry_allowed": true
      },
      "evaluation": {
        "evidence_coverage": 1.0,
        "action_coverage": 1.0,
        "hard_stop": false,
        "recommended_decision": "auto_retry",
        "issues": []
      }
    },
    "expected_decision": "human_review",
    "expected_reason_contains": "MWAA policy"
  },
  {
    "name": "Athena success state not retryable",
    "input": {
      "intent": "athena_failure",
      "confidence": 0.92,
      "evidence": {"athena_query": {"status": "SUCCEEDED"}},
      "workflow_profile": {
        "workflow_id": "athena_failure",
        "service": "athena",
        "risk_tier": "medium",
        "auto_retry_allowed": true
      },
      "evaluation": {
        "evidence_coverage": 1.0,
        "action_coverage": 1.0,
        "hard_stop": false,
        "recommended_decision": "auto_retry",
        "issues": []
      }
    },
    "expected_decision": "human_review",
    "expected_reason_contains": "Athena policy"
  },
  {
    "name": "Kafka always human review",
    "input": {
      "intent": "kafka_events_failed",
      "confidence": 0.95,
      "evidence": {"kafka_status": {"status": "FAILED"}},
      "workflow_profile": {
        "workflow_id": "kafka_failure",
        "service": "kafka",
        "risk_tier": "high",
        "auto_retry_allowed": false
      },
      "evaluation": {
        "evidence_coverage": 1.0,
        "action_coverage": 1.0,
        "hard_stop": false,
        "recommended_decision": "escalate",
        "issues": []
      }
    },
    "expected_decision": "human_review",
    "expected_reason_contains": "Policy override"
  }
]
